<html>
<head>

	<title>Camera Configuration Calculus</title>

	<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">

	<style>
	</style>

	<script>

		function update()
		{
			var elements =
			{
				ImageWidth: document.getElementById('ImageWidth'),
				ImageHeight: document.getElementById('ImageHeight'),
				ImageChannels: document.getElementById('ImageChannels'),
				CameraCount: document.getElementById('CameraCount'),
				CycleTime: document.getElementById('CycleTime'),
				CycleTimeUnit: document.getElementById('CycleTimeUnit'),
				CycleTimeTypeLine: document.getElementById('CycleTimeTypeLine'),
				CycleTimeTypeImage: document.getElementById('CycleTimeTypeImage'),

				ImageCycleTime: document.getElementById('ImageCycleTime'),
				ImageCycleTimeUnit: document.getElementById('ImageCycleTimeUnit'),
				LineCycleTime: document.getElementById('LineCycleTime'),
				LineCycleTimeUnit: document.getElementById('LineCycleTimeUnit'),
				LinesPerSecond: document.getElementById('LinesPerSecond'),
				ImagesPerSecond: document.getElementById('ImagesPerSecond'),
				BytesPerImage: document.getElementById('BytesPerImage'),
				GigaBitPerSecond: document.getElementById('GigaBitPerSecond'),
			};

			var input =
			{
				image:
				{
					width: NaN,
					height: NaN,
					channels: NaN,
				},
				camera:
				{
					count: NaN,
				},
				cycletime:
				{
					value: NaN,
					factor: NaN,
				}
			};

			input.image.width = parseFloat(elements.ImageWidth.value);
			input.image.height = parseFloat(elements.ImageHeight.value);
			input.image.channels = parseFloat(elements.ImageChannels.value);
			input.camera.count = parseFloat(elements.CameraCount.value);
			input.cycletime.value = parseFloat(elements.CycleTime.value.replace(',', '.'));

			if (elements.CycleTimeTypeLine.checked)
			{
				input.cycletime.factor = 1e-6;
			}

			if (elements.CycleTimeTypeImage.checked)
			{
				input.cycletime.factor = 1e-6 / input.image.height;
			}

			var output =
			{
				line:
				{
					cycletime: NaN,
					frequency: NaN,
					bytes: NaN,
				},
				image:
				{
					cycletime: NaN,
					frequency: NaN,
					bytes: NaN,
				},
				gbps: NaN
			};

			output.line.cycletime = input.cycletime.value * input.cycletime.factor * 1e+6;
			output.image.cycletime = input.image.height * input.cycletime.value * input.cycletime.factor * 1e+6;

			output.line.frequency = Math.round(1 / (input.cycletime.value * input.cycletime.factor));
			output.image.frequency = Math.round(1 / (input.image.height * input.cycletime.value * input.cycletime.factor));

			output.line.bytes = input.image.width * input.image.channels;
			output.image.bytes = input.image.height * input.image.width * input.image.channels;

			output.gbps = input.camera.count * output.image.frequency * output.image.bytes * (8 / Math.pow(1024, 3));

			elements.CycleTimeUnit.textContent = '[us]';
			elements.LineCycleTimeUnit.textContent = '[us]';
			elements.ImageCycleTimeUnit.textContent = '[us]';

			elements.LineCycleTime.value = output.line.cycletime;
			elements.ImageCycleTime.value = output.image.cycletime;

			elements.LinesPerSecond.value = output.line.frequency;
			elements.ImagesPerSecond.value = output.image.frequency;

			elements.BytesPerImage.value = output.image.bytes;
			elements.GigaBitPerSecond.value = output.gbps;
		}

	</script>

</head>
<body class="p-0 m-0 bg-white text-black">

<div class="container mx-auto">

	<div class="mt-3 mx-3 text-xl font-medium">Camera Configuration Calculus</div>

	<div class="flex flex-row flex-wrap">

		<div class="flex-1 p-3 space-y-3">

			<div class="flex flex-col">
				<label for="ImageWidth">Image Width</label>
				<input type="text" id="ImageWidth" onclick="this.select()" onkeyup="update()" value="1">
			</div>

			<div class="flex flex-col">
				<label for="ImageHeight">Image Height</label>
				<input type="text" id="ImageHeight" onclick="this.select()" onkeyup="update()" value="1">
			</div>

			<div class="flex flex-col">
				<label for="ImageChannels">Image Channels</label>
				<input type="text" id="ImageChannels" onclick="this.select()" onkeyup="update()" value="1">
			</div>

			<div class="flex flex-col">
				<label for="CameraCount">Camera Count</label>
				<input type="text" id="CameraCount" onclick="this.select()" onkeyup="update()" value="1">
			</div>

			<div class="flex flex-col">
				<label for="CycleTime">Cycle Time <span id="CycleTimeUnit"></span></label>
				<input type="text" id="CycleTime" onclick="this.select()" onkeyup="update()" value="1">
			</div>

			<div class="flex flex-col">
				<label>Cycle Target</label>
				<div>
					<input type="radio" id="CycleTimeTypeLine" name="CycleTimeType" onclick="update()" checked>
					<label for="CycleTimeTypeLine">Line</label>
					&nbsp;
					<input type="radio" id="CycleTimeTypeImage" name="CycleTimeType" onclick="update()">
					<label for="CycleTimeTypeImage">Image</label>
				</div>
			</div>

		</div>

		<div class="flex-1 p-3 space-y-3">

			<div class="flex flex-col">
				<label for="LineCycleTime">Line Cycle Time <span id="LineCycleTimeUnit"></span></label>
				<input type="text" id="LineCycleTime" disabled>
			</div>

			<div class="flex flex-col">
				<label for="ImageCycleTime">Image Cycle Time <span id="ImageCycleTimeUnit"></span></label>
				<input type="text" id="ImageCycleTime" disabled>
			</div>

			<div class="flex flex-col">
				<label for="LinesPerSecond">Lines Per Second</label>
				<input type="text" id="LinesPerSecond" disabled>
			</div>

			<div class="flex flex-col">
				<label for="ImagesPerSecond">Images Per Second</label>
				<input type="text" id="ImagesPerSecond" disabled>
			</div>

			<div class="flex flex-col">
				<label for="BytesPerImage">Bytes Per Image</label>
				<input type="text" id="BytesPerImage" disabled>
			</div>

			<div class="flex flex-col">
				<label for="GigaBitPerSecond">Total Gbit/s</label>
				<input type="text" id="GigaBitPerSecond" disabled>
			</div>

		</div>

	</div>

</div>

<script type="text/javascript">

	window.addEventListener('load', update);

	var labels = document.getElementsByTagName('label');

	for (var i = 0; i < labels.length; i++)
	{
		labels[i].className += ' mb-1 font-light';
	}

	var inputs = document.getElementsByTagName('input');

	for (var i = 0; i < inputs.length; i++)
	{
		if (inputs[i].type == 'text')
		{
			inputs[i].className += ' p-1 border rounded font-light';

			if (inputs[i].disabled)
			{
				inputs[i].className += ' bg-gray-50';
			}
		}
	}

</script>

</body>
</html>
